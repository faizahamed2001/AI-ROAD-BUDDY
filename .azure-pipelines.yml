# # Trigger the pipeline on pushes to the master branch
# trigger:
# - master

# # Use a Microsoft-hosted agent with the latest Ubuntu image
# pool:
#   vmImage: 'ubuntu-latest'

# # Define variables for reuse and easy updates
# variables:
#   # IMPORTANT: Replace with the name of your Azure Service Connection in Azure DevOps
#   azureSubscription: 'YourAzureServiceConnectionName'
  
#   # The name of your Azure Web App
#   webAppName: 'AIRoadBuddy'
  
#   # The version of Node.js to use
#   nodeVersion: '18.x'

# steps:
# # 1. Install the specified version of Node.js
# - task: NodeTool@0
#   inputs:
#     versionSpec: $(nodeVersion)
#   displayName: 'Install Node.js $(nodeVersion)'

# # 2. Install project dependencies and run the build script
# - script: |
#     npm install
#     npm run build
#   displayName: 'npm install and build'

# # 3. Deploy the build output to the Azure Web App
# # Note: AzureWebApp@1 is an older version but still functional.
# - task: AzureWebApp@1
#   displayName: 'Deploy to Azure Web App'
#   inputs:
#     azureSubscription: $(azureSubscription)
#     appType: 'webApp' # Use 'webAppLinux' if your App Service is on Linux
#     appName: $(webAppName)
#     # Point directly to the folder with your build output (e.g., 'dist', 'build')
#     package: '$(System.DefaultWorkingDirectory)/dist'





# Trigger the pipeline on pushes to the master branch
trigger:
- master

pool:
  vmImage: 'ubuntu-latest'

steps:
# This single task handles the build and deployment to Azure Static Web Apps
- task: AzureStaticWebApp@0
  inputs:
    # IMPORTANT: This token is a secret! 
    # 1. Get the token from your Static Web App resource in the Azure Portal.
    # 2. Store it as a secret variable in your pipeline settings (e.g., named 'deployment_token').
    azure_static_web_apps_api_token: $(deployment_token)
    
    # The following paths are relative to the root of your repository
    app_location: "/" # The location of your application source code.
    api_location: "" # The location of your API code (if you have one, e.g., for Azure Functions). Leave blank if not applicable.
    output_location: "dist" # The location of your build output folder (e.g., 'dist', 'build').
